<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Live Markdown â†’ HTML Converter</title>

  <style>
    :root{ 
      --bg:#f6f8fa; 
      --card:#ffffff; 
      --border:#e5e7eb;
      --text:#111;
      --muted:#6b7280;
      --accent:#2563eb;
      --hover:#1d4ed8;
    }
    
    [data-theme="dark"]{
      --bg:#0f172a;
      --card:#1e293b;
      --border:#334155;
      --text:#f1f5f9;
      --muted:#94a3b8;
      --accent:#3b82f6;
      --hover:#2563eb;
    }
    
    *{ box-sizing:border-box; }

    body{
      margin:0;
      background:var(--bg);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      transition:background 0.3s, color 0.3s;
    }

    .container{
      padding:20px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
      min-height:100vh;
    }

    .card{
      background:var(--card);
      padding:15px;
      border-radius:15px;
      box-shadow:0 4px 18px rgba(0,0,0,0.1);
      display:flex;
      flex-direction:column;
      transition:background 0.3s;
    }

    header{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }

    h2{
      font-size:18px;
      margin:0;
      font-weight:600;
      font-family: system-ui, sans-serif;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .icon{
      width:18px;
      height:18px;
      stroke:currentColor;
      fill:none;
      stroke-width:2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    .controls{
      margin-left:auto;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    button{
      padding:8px 14px;
      border:none;
      background:var(--accent);
      color:white;
      font-weight:600;
      border-radius:8px;
      cursor:pointer;
      transition:0.2s;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    button:hover{ background:var(--hover); }
    
    button .icon{
      width:16px;
      height:16px;
    }
    
    .theme-toggle{
      background:var(--muted);
      padding:8px 12px;
    }

    .toolbar{
      display:flex;
      gap:6px;
      margin-bottom:10px;
      flex-wrap:wrap;
      padding:8px;
      background:var(--bg);
      border-radius:8px;
      border:1px solid var(--border);
    }
    
    .toolbar button{
      padding:6px 10px;
      font-size:12px;
      background:var(--card);
      color:var(--text);
      border:1px solid var(--border);
    }
    
    .toolbar button:hover{
      background:var(--accent);
      color:white;
      border-color:var(--accent);
    }

    textarea{
      width:100%;
      flex:1;
      resize:vertical;
      padding:12px;
      border-radius:10px;
      border:1px solid var(--border);
      font-size:14px;
      font-family:ui-monospace,monospace;
      min-height:400px;
      background:var(--card);
      color:var(--text);
      transition:background 0.3s, color 0.3s;
    }

    .info{
      margin-top:8px;
      font-size:13px;
      color:var(--muted);
    }

    .preview{
      flex:1;
      border:1px solid var(--border);
      border-radius:10px;
      padding:16px;
      overflow:auto;
      background:var(--card);
      line-height: 1.7;
    }

    .preview h1, .preview h2, .preview h3{
      margin-top:1em;
      margin-bottom:0.5em;
    }
    
    .preview p{
      line-height:1.6;
    }
    
    .preview ul, .preview ol{
      padding-left:24px;
    }
    
    .preview a{
      color:var(--accent);
      text-decoration:none;
    }
    
    .preview a:hover{
      text-decoration:underline;
    }

    .preview code{
      background:#0b1220;
      color:#f8f8f2;
      padding:16px;
      border-radius:8px;
      display:block;
      margin:10px 0;
      white-space:pre-wrap;
      font-size:13px;
      font-family:ui-monospace,monospace;
    }
    
    .preview :not(pre) > code{
      display:inline;
      padding:2px 6px;
      background:var(--border);
      color:var(--text);
    }

    @media(max-width:900px){
      .container{
        grid-template-columns:1fr;
      }
      .controls, .toolbar{
        width:100%;
      }
    }
  </style>
</head>

<body>

  <div class="container">

    <section class="card">
      <header>
        <h2>
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          Markdown Input
        </h2>
        <div class="controls">
          <button class="theme-toggle" id="themeToggle">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
            Dark
          </button>
          <button id="downloadMd">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            .md
          </button>
          <button id="copyHtml">
            <svg class="icon" viewBox="0 0 24 24">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
            HTML
          </button>
          <button id="exportPdf">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
            PDF
          </button>
        </div>
      </header>

      <div class="toolbar">
        <button data-insert="**" title="Bold">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
            <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
          </svg>
          B
        </button>
        <button data-insert="*" title="Italic">
          <svg class="icon" viewBox="0 0 24 24">
            <line x1="19" y1="4" x2="10" y2="4"/>
            <line x1="14" y1="20" x2="5" y2="20"/>
            <line x1="15" y1="4" x2="9" y2="20"/>
          </svg>
          I
        </button>
        <button data-insert="~~" title="Strikethrough">
          <svg class="icon" viewBox="0 0 24 24">
            <line x1="4" y1="12" x2="20" y2="12"/>
            <path d="M12 5v14"/>
          </svg>
          S
        </button>
        <button data-action="h1" title="Heading 1">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M4 12h8M4 18V6M12 18V6"/>
          </svg>
          H1
        </button>
        <button data-action="h2" title="Heading 2">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M4 12h8M4 18V6M12 18V6"/>
          </svg>
          H2
        </button>
        <button data-action="h3" title="Heading 3">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M4 12h8M4 18V6M12 18V6"/>
          </svg>
          H3
        </button>
        <button data-action="ul" title="Bullet List">
          <svg class="icon" viewBox="0 0 24 24">
            <line x1="8" y1="6" x2="21" y2="6"/>
            <line x1="8" y1="12" x2="21" y2="12"/>
            <line x1="8" y1="18" x2="21" y2="18"/>
            <line x1="3" y1="6" x2="3.01" y2="6"/>
            <line x1="3" y1="12" x2="3.01" y2="12"/>
            <line x1="3" y1="18" x2="3.01" y2="18"/>
          </svg>
          List
        </button>
        <button data-action="ol" title="Numbered List">
          <svg class="icon" viewBox="0 0 24 24">
            <line x1="10" y1="6" x2="21" y2="6"/>
            <line x1="10" y1="12" x2="21" y2="12"/>
            <line x1="10" y1="18" x2="21" y2="18"/>
            <path d="M4 6h1v4M4 10h2"/>
          </svg>
          List
        </button>
        <button data-action="code" title="Code Block">
          <svg class="icon" viewBox="0 0 24 24">
            <polyline points="16 18 22 12 16 6"/>
            <polyline points="8 6 2 12 8 18"/>
          </svg>
          Code
        </button>
        <button data-action="link" title="Link">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
          </svg>
          Link
        </button>
      </div>

      <textarea id="md"># Welcome to Markdown Live Preview! âœ¨

Transform your **plain text** into *beautiful* formatted content.

## Features

- ðŸŽ¨ **Modern Design** - Beautiful gradient backgrounds
- ðŸŒ™ **Dark Mode** - Easy on the eyes
- ðŸ“ **Live Preview** - See changes instantly
- ðŸ’¾ **Auto-save** - Never lose your work
- ðŸ“„ **Export** - PDF, HTML, or Markdown

## Quick Guide

### Text Formatting
- **Bold text** with `**bold**`
- *Italic text* with `*italic*`
- ~~Strikethrough~~ with `~~text~~`

### Links & Code
Check out [Markdown Guide](https://www.markdownguide.org) for more!

```javascript
console.log("Hello, World!");

```

> Start creating something amazing! ðŸš€</textarea>

      <div class="info">âœ“ Autosaved to your browser</div>
    </section>

    <section class="card">
      <header>
        <h2>
          <svg class="icon" viewBox="0 0 24 24">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
          HTML Preview
        </h2>
        <div class="info">Rendered output â€” sanitized for safety</div>
      </header>

      <div id="preview" class="preview"></div>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    const md = document.getElementById("md");
    const preview = document.getElementById("preview");
    const copyBtn = document.getElementById("copyHtml");
    const downloadBtn = document.getElementById("downloadMd");
    const pdfBtn = document.getElementById("exportPdf");
    const themeToggle = document.getElementById("themeToggle");

    marked.setOptions({ breaks: true, gfm: true, mangle: false, headerIds: true });

    function renderHTML() {
      const raw = md.value;
      const html = marked.parse(raw);
      const clean = DOMPurify.sanitize(html);
      preview.innerHTML = clean;
      localStorage.setItem("markdown-autosave", raw);
    }

    const saved = localStorage.getItem("markdown-autosave");
    if (saved) md.value = saved;

    renderHTML();

    md.addEventListener("input", () => {
      clearTimeout(window._t);
      window._t = setTimeout(renderHTML, 150);
    });

    copyBtn.addEventListener("click", async () => {
      await navigator.clipboard.writeText(preview.innerHTML);
      const origText = copyBtn.textContent;
      copyBtn.innerHTML = '<svg class="icon" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
      setTimeout(() => copyBtn.innerHTML = '<svg class="icon" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> HTML', 1200);
    });

    downloadBtn.addEventListener("click", () => {
      const blob = new Blob([md.value], { type: "text/markdown" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "markdown.md";
      a.click();
      URL.revokeObjectURL(url);
    });

    pdfBtn.addEventListener("click", () => {
      const opt = {
        margin: 15,
        filename: 'markdown-export.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      
      const origText = pdfBtn.innerHTML;
      pdfBtn.innerHTML = '<svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg> Generating...';
      html2pdf().set(opt).from(preview).save().then(() => {
        pdfBtn.innerHTML = '<svg class="icon" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg> Saved!';
        setTimeout(() => pdfBtn.innerHTML = origText, 1500);
      });
    });

    const savedTheme = localStorage.getItem("theme") || "light";
    document.documentElement.setAttribute("data-theme", savedTheme);
    themeToggle.innerHTML = savedTheme === "dark" 
      ? '<svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg> Light'
      : '<svg class="icon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg> Dark';

    themeToggle.addEventListener("click", () => {
      const current = document.documentElement.getAttribute("data-theme");
      const newTheme = current === "dark" ? "light" : "dark";
      document.documentElement.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
      themeToggle.innerHTML = newTheme === "dark" 
        ? '<svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg> Light'
        : '<svg class="icon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg> Dark';
    });

    document.querySelector(".toolbar").addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      const start = md.selectionStart;
      const end = md.selectionEnd;
      const selected = md.value.substring(start, end);
      const before = md.value.substring(0, start);
      const after = md.value.substring(end);

      let newText = "";
      let cursorPos = start;

      if (btn.dataset.insert) {
        const wrap = btn.dataset.insert;
        newText = before + wrap + selected + wrap + after;
        cursorPos = start + wrap.length + selected.length + wrap.length;
      } else if (btn.dataset.action === "h1") {
        newText = before + "# " + selected + after;
        cursorPos = start + 2 + selected.length;
      } else if (btn.dataset.action === "h2") {
        newText = before + "## " + selected + after;
        cursorPos = start + 3 + selected.length;
      } else if (btn.dataset.action === "h3") {
        newText = before + "### " + selected + after;
        cursorPos = start + 4 + selected.length;
      } else if (btn.dataset.action === "ul") {
        newText = before + "- " + selected + after;
        cursorPos = start + 2 + selected.length;
      } else if (btn.dataset.action === "ol") {
        newText = before + "1. " + selected + after;
        cursorPos = start + 3 + selected.length;
      } else if (btn.dataset.action === "code") {
        newText = before + "```\n" + selected + "\n```" + after;
        cursorPos = start + 4 + selected.length;
      } else if (btn.dataset.action === "link") {
        newText = before + "[" + selected + "](url)" + after;
        cursorPos = start + selected.length + 3;
      }

      md.value = newText;
      md.focus();
      md.setSelectionRange(cursorPos, cursorPos);
      renderHTML();
    });
  </script>

</body>
</html>
